# This file should contain all the record creation needed to seed the database with its default values.
# The data can then be loaded with the bin/rails db:seed command (or created alongside the database with db:setup).
#
# Examples:
#
#   movies = Movie.create([{ name: "Star Wars" }, { name: "Lord of the Rings" }])
#   Character.create(name: "Luke", movie: movies.first)

# categories = [
#   "SSパーツ",
#   "Sパーツ",
#   "Mパーツ",
#   "Lパーツ",
#   "お得なセット料金",
#   "顔/ヒゲ脱毛",
#   "初回限定メニュー"
# ]

# categories.each do |category|
#   Category.create!(
#     title: category
#   )
# end

# menus = [
#   {
#     title: "初回カウンセリング",
#     duration: 30,
#     price: 0,
#     description: "初回カウンセリング",
#     category_id: 7
#   },
#   {
#     title: "両わき",
#     duration: 30,
#     price: 2900,
#     description: "両わき",
#     category_id: 1
#   },
#   {
#     title: "両ひじ",
#     duration: 30,
#     price: 2900,
#     description: "両ひじ",
#     category_id: 1
#   },
#   {
#     title: "乳輪周り",
#     duration: 30,
#     price: 2900,
#     description: "乳輪周り",
#     category_id: 1
#   },
#   {
#     title: "両手 指&甲",
#     duration: 30,
#     price: 2900,
#     description: "両手の指と甲",
#     category_id: 1
#   },
#   {
#     title: "両足 指&甲",
#     duration: 30,
#     price: 2900,
#     description: "両足の指と甲",
#     category_id: 1
#   },
#   {
#     title: "Vライン",
#     duration: 30,
#     price: 3900,
#     description: "Vライン",
#     category_id: 2
#   },
#   {
#     title: "Oライン",
#     duration: 30,
#     price: 3900,
#     description: "Oライン",
#     category_id: 2
#   },
#   {
#     title: "両ひざ",
#     duration: 30,
#     price: 3900,
#     description: "両ひざ",
#     category_id: 2
#   },
#   {
#     title: "えりあし",
#     duration: 30,
#     price: 3900,
#     description: "えりあし",
#     category_id: 2
#   },
#   {
#     title: "鼻下",
#     duration: 30,
#     price: 3900,
#     description: "別パーツとセットでのみ施術可。都度払いのみ。",
#     category_id: 2
#   },
#   {
#     title: "両ひじ下",
#     duration: 30,
#     price: 6800,
#     description: "両ひじ下",
#     category_id: 3
#   },
#   {
#     title: "両ひざ下",
#     duration: 60,
#     price: 6800,
#     description: "両ひざ下",
#     category_id: 3
#   },
#   {
#     title: "Iライン",
#     duration: 60,
#     price: 6800,
#     description: "Iライン",
#     category_id: 3
#   },
#   {
#     title: "バスト",
#     duration: 60,
#     price: 6800,
#     description: "バスト",
#     category_id: 3
#   },
#   {
#     title: "背中(上半分)",
#     duration: 60,
#     price: 6800,
#     description: "背中(上半分)",
#     category_id: 3
#   },
#   {
#     title: "ウエスト周り",
#     duration: 60,
#     price: 6800,
#     description: "ウエスト周り",
#     category_id: 3
#   },
#   {
#     title: "両ひじ上",
#     duration: 90,
#     price: 9700,
#     description: "両ひじ上",
#     category_id: 4
#   },
#   {
#     title: "両ひざ上",
#     duration: 90,
#     price: 9700,
#     description: "両ひざ上",
#     category_id: 4
#   },
#   {
#     title: "背中(全体)",
#     duration: 90,
#     price: 9700,
#     description: "背中全体",
#     category_id: 4
#   },
#   {
#     title: "ヒップ",
#     duration: 90,
#     price: 9700,
#     description: "ヒップ",
#     category_id: 4
#   },
#   {
#     title: "VIO脱毛",
#     duration: 120,
#     price: 11500,
#     description: "VIO脱毛",
#     category_id: 5
#   },
#   {
#     title: "全身脱毛",
#     duration: 240,
#     price: 48000,
#     description: "全身脱毛",
#     category_id: 5
#   },
#   {
#     title: "顔脱毛(顔全体)",
#     duration: 60,
#     price: 9900,
#     description: "顔脱毛(顔全体)",
#     category_id: 6
#   },
#   {
#     title: "ヒゲ脱毛(目から下)",
#     duration: 90,
#     price: 8900,
#     description: "ヒゲ脱毛(目から下)都度払いのみ",
#     category_id: 6
#   },
#   {
#     title: "ヒゲ脱毛(顔全体)",
#     duration: 90,
#     price: 9900,
#     description: "ヒゲ脱毛(顔全体)都度払いのみ",
#     category_id: 6
#   },
#   {
#     title: "顔脱毛 (体験)",
#     duration: 90,
#     price: 5000,
#     description: "初回限定顔脱毛(体験)",
#     category_id: 7
#   },
#   {
#     title: "VIO脱毛 (体験)",
#     duration: 90,
#     price: 4900,
#     description: "初回限定VIO脱毛(体験)",
#     category_id: 7
#   },
#   {
#     title: "ワキ脱毛 (体験)",
#     duration: 30,
#     price: 500,
#     description: "初回限定ワキ脱毛(体験)",
#     category_id: 7
#   }
# ]

# menus.each do |menu|
#   Menu.create!(menu)
# end

# statuses = [
#   '薬あり',
#   '紹介',
#   '痛みに弱い'
# ]

# i = 0
# statuses.length.times do
#   Status.create!(
#     title: statuses[i]
#   )
#   i += 1
# end

# require 'faker'

# business = Business.create!(
#   name: '脱毛サロン エピア epiR',
#   email: 'epir@epir-soshigaya.com',
#   phone: '080-3715-9012',
#   state: '東京都',
#   city: '世田谷区',
#   address: '砧8丁目3-10 砧OKマンション202',
#   zip: '157-0073',
#   url: 'http://epir-soshigaya.com/',
#   insta: 'https://www.instagram.com/epir.soshigaya',
#   line_id: 'epir.ikuta'
# )

# config = Config.create!(
#   lang: 'ja',
#   tax: 10,
#   start: 10,
#   end: 20,
#   interval: 30
# )

# User.create!(
#   first_name: "Master",
#   last_name: "Admin",
#   password: "password",
#   email: "test@test.com",
#   phone: "123-456-7890",
#   line_id: 'master.admin'
#   gender: "該当なし",
#   zip: 10001,
#   state: "東京都",
#   city: "世田谷区",
#   address: "545 W 30th St",
#   note: "痛みに強いのでハイパワーでお願いします。",
#   birthday: "1900-01-01",
#   status: "System",
#   admin: true
# )

# User.create!(
#   first_name: "準備時間",
#   last_name: "30分",
#   password: "password",
#   email: "interval@test.com",
#   status: "System",
# )

# birthday = Time.zone.parse('1950-01-01')
# genders = [
#   "男性",
#   "女性",
#   "ノンバイナリー",
#   "回答しない",
#   "該当なし"
# ]

# user_count = 1
# statuses_id = [*(1..(statuses.length))]
# i = 0
# 100.times do
#   gender = genders[i]
#   if user_count % 7 == 0
#     user_note = Faker::JapaneseMedia::Doraemon.gadget
#   else
#     user_note = nil
#   end

#   user = User.new(
#     first_name: Faker::Name.unique.first_name,
#     last_name: Faker::Name.last_name,
#     password: "password",
#     email: "user#{user_count}@user.com",
#     phone: Faker::PhoneNumber.cell_phone,
#     line_id: "line_#{user_count}"
#     gender: gender,
#     zip: Faker::Address.zip,
#     state: '東京都',
#     city: '世田谷区',
#     address: Faker::Address.street_address,
#     note: user_note,
#     birthday: birthday,
#     status: "User",
#     admin: false
#   )
#   user.save
#   if user_count % 5 == 0
#     UserStatus.create!(
#       user_id: user.id,
#       status_id: statuses_id.sample
#     )
#   end
#   birthday += 40.days
#   user_count += 1
#   i += 1
#   if i > 4
#     i = 0
#   end
# end

# date = Date.current

# 90.times do
#   start_time = Time.zone.parse("10:00:00")
#   20.times do
#     BusinessTime.create!(
#       date: date,
#       time: start_time,
#       available: true
#     )
#     start_time += 1800.seconds # 30 min
#   end
#   date += 1
# end

# user_id = 3
# start_time = [
#   Time.zone.parse("10:00:00"),
#   Time.zone.parse("12:00:00"),
#   Time.zone.parse("14:00:00"),
#   Time.zone.parse("16:00:00"),
#   Time.zone.parse("18:00:00")
# ]
# count = 0
# menus_id = Menu.all.map{|menu| menu.id}
# date = Date.current
# config = Config.find(1)

# 100.times do

#   menu_id = menus_id.sample
#   duration = Menu.find(menu_id).duration
#   end_time = start_time[count] + duration.minutes
#   menu = Menu.find(menu_id)
#   user = User.find(user_id)

#   if user.statuses.length > 0
#     calendar_color = 'danger'
#   else
#     if user.note
#       calendar_color = 'warning'
#     else
#       calendar_color = 'primary'
#     end
#   end
#   # create Event
#   new_event = Event.new(
#     date: date,
#     start: start_time[count],
#     end: end_time,
#     user_id: user_id,
#     duration_total: menu.duration,
#     status: "booked",
#     price: menu.price,
#     calendar_color: calendar_color,
#     tax: config.tax * menu.price
#   )
#   new_event.save

#   # update BusinessTime
#   business_times = BusinessTime.where(date: date, time: start_time[count]...end_time)
#   business_times.each do |business_time|
#     business_time.available = false
#     business_time.save
#   end
#   # create interval
#   interval = Event.new(
#     date: date,
#     start: end_time,
#     end: end_time + config.interval.minutes,
#     user_id: 2,
#     duration_total: config.interval,
#     status: "booked",
#     price: 0,
#     calendar_color: 'gray',
#     tax: 0
#   )
#   interval.save
#   business_times = BusinessTime.where(date: date, time: end_time...(end_time + config.interval.minutes))
#   business_times.each do |business_time|
#     business_time.available = false
#     business_time.save
#   end
#   # create EventMenu
#   event_id = new_event.id
#   EventMenu.create!(
#     event_id: event_id,
#     menu_id: menu_id,
#     user_id: user_id,
#     status: "booked",
#   )
#   if count == 3
#     count = 0
#     date += 1.days
#     start_time = start_time.shuffle
#   end
#   user_id += 1
#   count += 1
# end


# This file will be executed once a day at 12:00 AM by Heroku Scheduler
# Comment out all seeds except BusinessTime below
# =======================
config = Config.find(1)

new_date = Date.current.since(90.days)
closing_days = ClosingDay.all
closing_days.each do |closed|
  if closed.date == new_date
    time_slot = 1800 # 30 min
    start_time = Time.zone.parse("10:00:00")
    20.times do
      BusinessTime.create!(
        date: new_date,
        time: start_time,
        available: false
      )
      start_time += 1800.seconds # 30 min
    end
  else
    time_slot = 1800 # 30 min
    start_time = Time.zone.parse("10:00:00")
    20.times do
      BusinessTime.create!(
        date: new_date,
        time: start_time,
        available: true
      )
      start_time += 1800.seconds # 30 min
    end
  end
end

# =======================